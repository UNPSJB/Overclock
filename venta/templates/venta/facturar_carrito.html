{% extends 'base/vendedor.html'%} {% load static %} {% load hotel %} 
{% block header %}
<button
  onclick="location.href='/venta/vendedor'"
  style="text-decoration: none"
  class="rounded-1 btn btn-sm btn-outline-secondary text-white ml-4 mt-1"
>
  VENDEDOR: {{factura.vendedor.persona.nombre.upper}}
  {{factura.vendedor.persona.apellido.upper}}
</button>
{% endblock header %} {% block carrito %}
<!--VACIO PARA QUE NO APAREZCA EL CARRITO, DADO QUE ESTAMOS EN LA VISTA CARRITO-->
{% endblock carrito %} {% block content %}

<div class="formularioCarrito" id="vistaCarrito">
  <center>
    <h1 class="my-4">FACTURA NÂ° {{factura.pk}}</h1>
    <h4>FECHA: {{factura.fecha}}</h4>
    <h4>
      CLIENTE: {{factura.cliente.persona.nombre}}
      {{factura.cliente.persona.apellido}}
    </h4>
    <h4>
      VENDEDOR: {{factura.vendedor.persona.nombre}}
      {{factura.vendedor.persona.apellido}}
    </h4>
  </center>
  <table
    id="example1"
    class="table table-striped table-bordered tablaListaHabitacion"
  >
    <thead>
      <tr>
        <th>
          <center>Hotel</center>
        </th>
        <th>
          <center>Descripcion</center>
        </th>

        <th>
          <center>Fecha inicio</center>
        </th>
        <th>
          <center>Fecha fin</center>
        </th>
        <th>
          <center>SubTotal</center>
        </th>
      </tr>
    </thead>
    <tbody>
      {% for alquiler in factura.get_alquileres %} 
      {% if alquiler.paquete is  None %}
      <tr>
        <td>{{alquiler.get_hotel}}</td>
        <td>{{alquiler.get_cantidad_habitaciones}} HABITACIONES</td>
        <td>{{alquiler.inicio}}</td>
        <td>{{alquiler.fin}}</td>
        <td>{{alquiler.total}}</td>
      </tr>
      {% for habitacion in alquiler.habitaciones.all %}
      <tr>
        <td></td>
        <td>{{habitacion.tipo.nombre}} {{habitacion.numero}}</td>
        <td>{{alquiler.inicio}}</td>
        <td>{{alquiler.fin}}</td>
        <td></td>
      </tr>
      {% endfor %}
      {% else %} 

      <tr>
        <td>{{alquiler.get_hotel}}</td>
        <td>PAQUETE: {{alquiler.paquete.nombre}}  {{alquiler.get_cantidad_habitaciones}} HABITACIONES</td>
        <td>{{alquiler.inicio}}</td>
        <td>{{alquiler.fin}}</td>
        <td>{{alquiler.total}}</td>
      </tr>

      {% for habitacion in alquiler.paquete.get_habitaciones %}
      <tr>
        <td></td>
        <td>{{habitacion.tipo.nombre}} {{habitacion.numero}}</td>
        <td>{{alquiler.inicio}}</td>
        <td>{{alquiler.fin}}</td>
        <td></td>
      </tr>
      {% endfor %}

      {% endif %}
      
      
      
      {% endfor %}
    </tbody>
  </table>
  <div class="row mt-2">
    <div class="col-10 ml-4" style="background-color: rgb(185, 182, 182)">
      <h3>TOTAL: ${{factura.total}}</h3>
    </div>
    <div class="col-1">
      <button
        class="btn btn-success"
        {%  if    cliente     is    None     %}
        onclick="Swal.fire({
            icon: 'error',
            title: 'No se puede facturar sin seleccionar un Cliente',
            text: 'Ingrese a menu cliente y seleccione uno...',
        });"
        {%       else       %}
        onClick="location.href='{% url 'venta:facturarCarrito' %}'"
        {%       endif  %}
      >
        PAGAR
      </button>
    </div>
  </div>
</div>

{% endblock content %} {% block extrajs %} {% endblock extrajs %}
